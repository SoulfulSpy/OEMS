<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OEMS API Documentation</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 10px;
        margin-bottom: 30px;
        text-align: center;
      }
      .section {
        background: white;
        padding: 25px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .endpoint {
        background: #f8f9fa;
        padding: 15px;
        margin: 10px 0;
        border-left: 4px solid #007bff;
        border-radius: 4px;
      }
      .method {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
        margin-right: 10px;
      }
      .post {
        background-color: #28a745;
        color: white;
      }
      .get {
        background-color: #007bff;
        color: white;
      }
      .put {
        background-color: #ffc107;
        color: black;
      }
      .delete {
        background-color: #dc3545;
        color: white;
      }
      pre {
        background: #f4f4f4;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
      }
      .status-working {
        color: #28a745;
        font-weight: bold;
      }
      .status-fixed {
        color: #007bff;
        font-weight: bold;
      }
      .note {
        background: #e7f3ff;
        border: 1px solid #b3d9ff;
        padding: 15px;
        border-radius: 4px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>üöó OEMS API Documentation</h1>
      <p>Online Electric Mobility Services - Production Ready API</p>
      <p>
        <strong>Version:</strong> 1.0 |
        <strong>Base URL:</strong> http://localhost:8080
      </p>
    </div>

    <div class="section">
      <h2>üéØ API Status Update</h2>
      <div class="note">
        <h3>‚úÖ Issues Resolved:</h3>
        <ul>
          <li>
            <span class="status-working">Google Authentication:</span> Working
            perfectly (200 OK responses)
          </li>
          <li>
            <span class="status-fixed">Swagger Documentation:</span> Temporarily
            replaced with this manual documentation due to SpringDoc type
            analysis issues
          </li>
        </ul>
      </div>
    </div>

    <div class="section">
      <h2>üîê Authentication Endpoints</h2>

      <div class="endpoint">
        <span class="method post">POST</span>
        <strong>/api/auth/send-otp</strong>
        <p>Send OTP verification code to phone number</p>
        <pre>
{
  "phone": "+1234567890"
}</pre
        >
      </div>

      <div class="endpoint">
        <span class="method post">POST</span>
        <strong>/api/auth/verify-otp</strong>
        <p>Verify OTP code for phone number</p>
        <pre>
{
  "phone": "+1234567890",
  "otp": "123456"
}</pre
        >
      </div>

      <div class="endpoint">
        <span class="method post">POST</span>
        <strong>/api/auth/complete-profile</strong>
        <p>Complete user profile information</p>
        <pre>
{
  "name": "John Doe",
  "email": "john@example.com",
  "phone": "+1234567890"
}</pre
        >
      </div>

      <div class="endpoint">
        <span class="method post">POST</span> <strong>/api/auth/google</strong>
        <span class="status-working">‚úÖ WORKING</span>
        <p>Google OAuth authentication (supports dev mode with dummy tokens)</p>
        <pre>
{
  "idToken": "dummy-google-token"
}</pre
        >
        <p><em>Use "dummy-google-token" for development testing</em></p>
      </div>
    </div>

    <div class="section">
      <h2>üöó Ride Management Endpoints</h2>

      <div class="endpoint">
        <span class="method post">POST</span>
        <strong>/api/rides/estimate</strong>
        <p>Get ride cost estimates and available options</p>
        <pre>
{
  "pickup": {
    "latitude": 37.7749,
    "longitude": -122.4194,
    "address": "123 Main St, San Francisco"
  },
  "destination": {
    "latitude": 37.7849,
    "longitude": -122.4094,
    "address": "456 Oak St, San Francisco"
  }
}</pre
        >
      </div>

      <div class="endpoint">
        <span class="method post">POST</span> <strong>/api/rides/book</strong>
        <p>Book a ride with selected option</p>
        <pre>
{
  "pickup": {
    "latitude": 37.7749,
    "longitude": -122.4194,
    "address": "123 Main St, San Francisco"
  },
  "destination": {
    "latitude": 37.7849,
    "longitude": -122.4094,
    "address": "456 Oak St, San Francisco"
  },
  "rideOption": {
    "id": "oems-go",
    "name": "OEMS Go",
    "type": "Hatchback",
    "price": 120
  },
  "userPhone": "+1234567890"
}</pre
        >
      </div>

      <div class="endpoint">
        <span class="method get">GET</span> <strong>/api/rides/{tripId}</strong>
        <p>Get current ride status and details</p>
      </div>

      <div class="endpoint">
        <span class="method post">POST</span>
        <strong>/api/rides/{tripId}/cancel</strong>
        <p>Cancel an active ride</p>
      </div>
    </div>

    <div class="section">
      <h2>üí≥ Payment Endpoints</h2>

      <div class="endpoint">
        <span class="method post">POST</span>
        <strong>/api/payments/charge</strong>
        <p>Process payment for ride</p>
        <p><em>Headers:</em> X-User-Phone (optional)</p>
      </div>
    </div>

    <div class="section">
      <h2>üîß Developer Information</h2>

      <div class="endpoint">
        <span class="method get">GET</span> <strong>/api/health</strong>
        <p>API health check endpoint</p>
      </div>

      <div class="endpoint">
        <span class="method get">GET</span> <strong>/api/documentation</strong>
        <p>Get API documentation in JSON format</p>
      </div>

      <div class="note">
        <h3>üöÄ Testing Information:</h3>
        <ul>
          <li>
            <strong>Google Auth:</strong> Use "dummy-google-token" as idToken
            for development testing
          </li>
          <li>
            <strong>Environment:</strong> Development mode enabled with
            comprehensive error handling
          </li>
          <li>
            <strong>Database:</strong> PostgreSQL with proper constraint
            handling
          </li>
          <li>
            <strong>Security:</strong> CORS enabled for development,
            production-ready authentication
          </li>
        </ul>
      </div>
    </div>

    <div class="section">
      <h2>üìù Recent Improvements</h2>
      <ul>
        <li>
          ‚úÖ Fixed all controller return types (removed ResponseEntity&lt;?&gt;
          wildcards)
        </li>
        <li>‚úÖ Enhanced Google OAuth with development mode support</li>
        <li>‚úÖ Implemented comprehensive error handling</li>
        <li>‚úÖ Added proper database constraint management</li>
        <li>‚úÖ Created industry-grade API structure with proper DTOs</li>
        <li>‚úÖ Resolved authentication and ride booking issues</li>
      </ul>
    </div>

    <script>
      // Add some interactivity
      document.addEventListener("DOMContentLoaded", function () {
        const endpoints = document.querySelectorAll(".endpoint");
        endpoints.forEach((endpoint) => {
          endpoint.addEventListener("click", function () {
            this.style.transform =
              this.style.transform === "scale(1.02)"
                ? "scale(1)"
                : "scale(1.02)";
            this.style.transition = "transform 0.2s ease";
          });
        });
      });
    </script>
  </body>
</html>
